-- Code your design here
library IEEE;
use IEEE.std_logic_1164.all;
-- Code your design here
library IEEE;
use IEEE.std_logic_1164.all;

entity driver7seg is
	port(
    	clk			: in std_logic;
        --en			: in std_logic;
        reset		: in std_logic;
        CATHODES_IN	: in std_logic_vector(28 downto 1);
        AN			: out std_logic_vector(3 downto 0); --Solo 4 displays
        CATHODES_OUT: out std_logic_vector(7 downto 1);
    );
end driver7seg;
  
architecture modular of driver7seg is
begin
	process(clk)
    variable code: std_logic_vector(3 downto 0) :="0001";
    begin
    	if reset = '1' then
        	code:="0001";
    	elsif rising_edge(clk) then
        	--if en = '1' then 
              code:= code(2 downto 0) & code(3); --Roll hacia la izquierda
              AN <= code; -- Enciendo los displays correspondientes
              CATHODES_OUT <= (CATHODES_IN(7 downto 1) 		AND code(0)) OR --Muestra 1 carÃ¡cter
                              (CATHODES_IN(14 downto 8) 	AND code(1)) OR
                              (CATHODES_IN(21 downto 15) 	AND code(2)) OR
                              (CATHODES_IN(28 downto 22) 	AND code(3)) ;
        	--end if;
        end if;
    end process;
end modular;